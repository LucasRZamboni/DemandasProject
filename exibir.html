<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exibir Demandas</title>
    <link rel="stylesheet" href="style/style.css" />
    <link rel="stylesheet" href="style/exibir.css" />
    <link rel="stylesheet" href="style/media.css" />
  </head>
  <body>
    <div class="container">
      <a href="index.html" class="voltar">Voltar</a>

      <input
        type="text"
        id="search-input"
        class="pesquisa"
        placeholder="Buscar..."
      />

      <h1 class="title">
        Demandas cadastradas <span id="totalDemandas"></span>
      </h1>

      <p id="edit-message" class=""></p>

      <div class="filtroContainer">
        <span id="openFiltro"><ion-icon id="filtroIcon" name="menu-outline"></ion-icon></span>
        <h4>Filtro</h4>
        <div class="filtro-control">
          <input type="checkbox" name="todos" id="filtroTodos" checked />
          <p>Todos (<span id="contadorTodos"></span>)</p>
        </div>
        <div class="filtro-control">
          <input type="checkbox" name="cadastrado" id="filtroCadastrado" />
          <p>Cadastrado (<span id="contadorCadastrado"></span>)</p>
        </div>
        <div class="filtro-control">
          <input type="checkbox" name="enviado" id="filtroEnviado" />
          <p>Enviado (<span id="contadorEnviado"></span>)</p>
        </div>
        <div class="filtro-control">
          <input type="checkbox" name="verificando" id="filtroVerificando" />
          <p>Verificando (<span id="contadorVerificando"></span>)</p>
        </div>
        <div class="filtro-control">
          <input type="checkbox" name="corrigido" id="filtroCorrigido" />
          <p>Corrigido (<span id="contadorCorrigido"></span>)</p>
        </div>
      </div>

      <div id="demandas-container"></div>

      <!-- Modal para edição de status -->
      <div id="edit-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>Editar Status da Demanda</h2>
          <form id="edit-status-form">
            <input type="hidden" id="edit-id" />
            <label for="edit-status">Novo Status:</label>
            <select id="edit-status" name="edit-status" required>
              <option value="Cadastrada">Cadastrada</option>
              <option value="Enviado">Enviado</option>
              <option value="Verificando">Verificando</option>
              <option value="Corrigido">Corrigido</option>
            </select>
            <button type="submit" class="salvar">Salvar</button>
          </form>
          <!-- <p id="edit-message"></p> -->
        </div>
      </div>

      <!-- Modal para edição de outros itens -->
      <div id="edit-other-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>Editar Demanda</h2>
          <form id="edit-other-form">
            <input type="hidden" id="edit-other-id" />

            <label for="edit-other-usuario">Usuário:</label>
            <input type="text" id="edit-other-usuario" required />

            <label for="edit-other-problemaResumido">Problema Resumido:</label>
            <input type="text" id="edit-other-problemaResumido" required />

            <label for="edit-other-email">E-mail:</label>
            <input type="text" id="edit-other-email" required />

            <label for="edit-other-servidor">Servidor:</label>
            <select id="edit-other-servidor" required>
              <option value="AL">AL</option>
              <option value="SP">SP</option>
              <option value="SC">SC</option>
              <option value="Sastracker">Sastracker</option>
              <option value="Alfa">Alfa</option>
              <option value="TL">TL</option>
            </select>

            <label for="edit-other-descricao">Descrição do Problema:</label>
            <textarea id="edit-other-descricao" required></textarea>

            <label for="edit-other-imagem">Imagem (opcional):</label>
            <input type="file" id="edit-other-imagem" />

            <button type="submit" class="salvar">Salvar</button>
          </form>
          <!-- <p id="edit-message"></p> -->
        </div>
      </div>

      <!-- Modal para confirmação de exclusão -->
      <div id="delete-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>Confirmar Exclusão</h2>
          <div class="buttons">
            <button id="confirm-delete-btn" class="confirm">Confirmar</button>
            <button id="cancel-delete-btn" class="cancel">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <script type="module" src="javascript/exibir.js"></script>
    <script src="javascript/filtro.js"></script>
  </body>
</html>
